/** @flow */
import type { IdP } from './idp'
import type { ClientToken } from './identity-provider.js.flow'

type Id = string

type EndpointConfig = {
  endpoint: string,
  accountEndpoint?: string | Function,
  authnEndpoint?: string | Function
}

type RefreshableData = {
  refresh_token?: string,
}

type UnrefreshableData = {
  access_token?: string,
  expires_in?: number,
  expires_time?: number,
}

export type TokenData = UnrefreshableData & RefreshableData

export type CallableP<T> = () => T

export type AccountConfig = {
  label: string,
  leeway: number,
  myAccountId: Id,
  audience: string,
  provider: IdP<EndpointConfig>,
  retries: number,
  retryDelay: number,
}

export type SignInOptions = {
  auth_key: string,
  params: ClientToken,
  refresh_token: ?string,
  data?: TokenData
}
